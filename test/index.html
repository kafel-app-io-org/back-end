<!DOCTYPE html>
<html>
<head>
  <title>Firebase Phone Auth Testing</title>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
</head>
<body>
  <h3>Firebase Phone Auth Test Mode</h3>
  <div id="recaptcha-container"></div>

  <script>
  //   // Your Firebase config here
  //   const firebaseConfig = {
  //   apiKey: "AIzaSyCuL7OwWxTLjOf57-EB2nT5xHlM7ITgTtU",
  //   authDomain: "kafel-dev-1.firebaseapp.com",
  //   projectId: "kafel-dev-1",
  //   storageBucket: "kafel-dev-1.firebasestorage.app",
  //   messagingSenderId: "1097669804574",
  //   appId: "1:1097669804574:web:c288a4f86a9a9249b5240f",
  //   measurementId: "G-QJQLLWWHJC"
  // };

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCyBZap0qpOif3Igi3drWqXcepqxLVfeqA",
    authDomain: "kafel-app-io-35b84.firebaseapp.com",
    projectId: "kafel-app-io-35b84",
    storageBucket: "kafel-app-io-35b84.firebasestorage.app",
    messagingSenderId: "94631088411",
    appId: "1:94631088411:web:e874c9a1db196b4bf703be",
    measurementId: "G-92L813K9ZT"
  };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // ✅ Enable test mode (no real verification)
    auth.settings.appVerificationDisabledForTesting = true;

    const phoneNumber = "+970598727792";
    const testVerificationCode = "123456";

    const appVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');

    auth.signInWithPhoneNumber(phoneNumber, appVerifier)
      .then((confirmationResult) => {
        return confirmationResult.confirm(testVerificationCode);
      })
      .then((result) => {
        const user = result.user;
        return user.getIdToken(); 
        // console.log("✅ User signed in (test):", user);
        // alert("Test user signed in! UID: " + user.getIdToken());
      }).then((idToken) => {
    console.log("✅ ID Token:", idToken);
    alert("Token: " + idToken);
    // You can now use this token in Postman or send to your backend
  })
      .catch((error) => {
        console.error("❌ Error during test sign-in:", error);
        alert("Error: " + error);
      });
  </script>
</body>
</html>
